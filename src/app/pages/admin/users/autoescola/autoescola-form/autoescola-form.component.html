<div class="flex flex-col flex-auto min-w-0">
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-8 px-6 md:px-8 border-b">
        <!-- Title -->
        <div class="text-4xl font-extrabold tracking-tight">Auto Escola</div>
        <!-- Actions -->
        <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
            <!-- Add product button -->
            <button
                (click)="goBack()"
                class="ml-1 items-center"
                mat-flat-button
                [color]="'primary'">
                <mat-icon [svgIcon]="'heroicons_outline:arrow-left'"></mat-icon>
                <span class="ml-1 mr-1">Voltar</span>
            </button>
        </div>
    </div>
    <div class="flex-auto p-6 sm:p-5">
        <!-- Vertical stepper -->
        <div class="mb-8 text-2xl font-bold" *ngIf="id; else inserir">Editar</div>
        <ng-template #inserir>
            <div class="mb-8 text-2xl font-bold">Adicionar</div>
        </ng-template>

        <form
            class="p-4 bg-card shadow rounded overflow-hidden shadow-2xl"
            [formGroup]="verticalStepperForm">
            <mat-vertical-stepper
                [linear]="true"
                #verticalStepper>
                <mat-step
                    [formGroupName]="'step1'"
                    [stepControl]="verticalStepperForm.get('step1')"
                    #verticalStepperStep1>
                    <ng-template matStepLabel>Informações Básicas</ng-template>
                    <p class="my-6 font-medium">
                        Pode ser inserido algum texto aqui
                    </p>
                    <div class="flex mt-2">
                        <mat-form-field class="flex-auto">
                            <input
                                matInput
                                [formControlName]="'razaoSocial'"
                                [placeholder]="'Razão Social'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:office-building'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex flex-col gt-xs:flex-row">
                        <mat-form-field class="flex-auto gt-xs:pr-3">
                            <input
                                matInput
                                [formControlName]="'nomeFantasia'"
                                [placeholder]="'Nome Fantasia'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:user'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'inscricaoEstadual'"
                                [placeholder]="'Inscrição Estadual'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:identification'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <mat-label>Data de Abertura</mat-label>
                            <input matInput type="date" [formControlName]="'dataFundacao'">
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:calendar'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'email'"
                                [placeholder]="'e-mail'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:mail'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'descricao'"
                                [placeholder]="'descricao'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:annotation'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'site'"
                                [placeholder]="'site'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:globe-alt'"></mat-icon>
                            <span matPrefix>https://www.</span>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'cnpj'"
                                [placeholder]="'CNPJ'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:identification'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex justify-end">
                        <button
                            class="px-8"
                            mat-flat-button
                            [color]="'primary'"
                            [disabled]="verticalStepperStep1.stepControl.pristine || verticalStepperStep1.stepControl.invalid"
                            type="button"
                            matStepperNext>
                            Avançar
                        </button>
                    </div>
                </mat-step>

                <mat-step
                    [formGroupName]="'step2'"
                    [stepControl]="verticalStepperForm.get('step2')"
                    #verticalStepperStep2>
                    <ng-template matStepLabel>Endereço</ng-template>
                    <p class="my-6 font-medium">
                        Pode ser inserido algum texto aqui
                    </p>
                    <div class="flex flex-col gt-xs:flex-row mt-2">
                        <mat-form-field class="flex-auto gt-xs:pr-3">
                            <input
                                matInput
                                [formControlName]="'cep'"
                                [placeholder]="'Cep'"
                                (blur)="buscaCep($event.target)"
                                cep [textMask]="{mask: masks.cep.textMask}"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:hashtag'"></mat-icon>
                        </mat-form-field>
                        <mat-form-field class="flex-auto gt-xs:pl-3">
                            <input
                                matInput
                                [formControlName]="'enderecoLogradouro'"
                                [placeholder]="'Endereço'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:location-marker'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex">
                        <mat-form-field class="flex-auto">
                            <input
                                matInput
                                [formControlName]="'bairro'"
                                [placeholder]="'Bairro'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:home'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex">
                        <mat-form-field class="fuse-mat-textarea flex-auto">
                            <input
                                matInput
                                [formControlName]="'numero'"
                                [placeholder]="'Número'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:annotation'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex">
                        <mat-form-field class="fuse-mat-textarea flex-auto">
                            <mat-label>UF</mat-label>
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:location-marker'"
                                matPrefix></mat-icon>
                            <mat-select [formControlName]="'uf'">
                                <mat-option *ngFor="let item of estados" [value]="item">{{item}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="flex">
                        <mat-form-field class="fuse-mat-textarea flex-auto">
                            <input
                                matInput
                                [formControlName]="'cidade'"
                                [placeholder]="'Cidade'"
                                required>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:map'"></mat-icon>
                        </mat-form-field>
                    </div>
                    <div class="flex justify-end">
                        <button
                            class="px-8 mr-2"
                            mat-flat-button
                            [color]="'accent'"
                            type="button"
                            matStepperPrevious>
                            Voltar
                        </button>
                        <button
                            class="px-8"
                            mat-flat-button
                            [color]="'primary'"
                            [disabled]="verticalStepperStep2.stepControl.pristine || verticalStepperStep2.stepControl.invalid"
                            type="button"
                            matStepperNext>
                            Avançar
                        </button>
                    </div>
                </mat-step>

                <mat-step
                    [formGroupName]="'step3'"
                    [stepControl]="verticalStepperForm.get('step3')">
                    <ng-template matStepLabel>Contatos</ng-template>
                    <p class="my-6 font-medium">
                        Pode ser inserido algum texto aqui
                    </p>
                    <div class="flex flex-col gt-sm:flex-row">
                        <div class="flex flex-col">
                            <ng-container
                                *ngFor="let phoneNumber of verticalStepperForm.get('step3').get('telefones')['controls']; let i = index;"
                                formArrayName="telefones">
                                <div class="relative flex">
                                    <mat-form-field class="fuse-mat-no-subscript flex-auto">
                                        <mat-label>Telefone</mat-label>
                                        <input
                                            matInput
                                            [placeholder]="'telefone'"
                                            [formControl]="phoneNumber.get('telefone')"
                                            [value]="phoneNumber.value.telefone ?? ''">
                                    </mat-form-field>
                                    <!-- Remove phone number -->
                                    <ng-container>
                                        <div
                                            class="flex items-center w-10 pl-2"
                                            [ngClass]="'mt-6'">
                                            <button
                                                class="w-8 h-8 min-h-8"
                                                mat-icon-button
                                                (click)="removePhoneNumber(phoneNumber.value.id ?? 0,i)"
                                                matTooltip="Remove">
                                                <mat-icon
                                                    class="icon-size-5"
                                                    [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                            </button>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container>
                        </div>
                        <!--end:telefones-->
                        <div
                            class="group inline-flex items-center mt-2 -ml-4 py-2 px-4 rounded cursor-pointer"
                            (click)="addPhoneNumberField()">
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                            <span
                                class="ml-2 font-medium text-secondary group-hover:underline">Inserir novo contato</span>
                        </div>

                    </div>
                    <div class="flex flex-col mt-8 gt-sm:mt-0 gt-sm:ml-16">
                        <span class="font-medium mb-2">Pode ser inserido algo aqui</span>

                    </div>
                    <div class="flex justify-end mt-8">
                        <button
                            class="px-8 mr-2"
                            mat-flat-button
                            [color]="'accent'"
                            type="button"
                            matStepperPrevious>
                            Voltar
                        </button>
                        <button
                            class="px-8"
                            mat-flat-button
                            [color]="'primary'"
                            type="button"
                            matStepperNext>
                            Avançar
                        </button>
                    </div>
                </mat-step>

                <mat-step
                    [formGroupName]="'step4'"
                    [stepControl]="verticalStepperForm.get('step4')">
                    <ng-template matStepLabel>Documentos</ng-template>
                    <p class="my-6 font-medium">
                        Pode ser inserido algum texto aqui
                    </p>
                    <div class="flex flex-col gt-sm:flex-row">
                        <div class="flex flex-col">
                            <ng-container
                                *ngFor="let file of verticalStepperForm.get('step4').get('arquivos')['controls']; let i = index;"
                                formArrayName="arquivos">
                                <div class="relative flex">
                                        <input
                                            type="file"
                                            accept=".pdf"
                                            [placeholder]="'arquivos'"
                                            [formControl]="file.get('arquivo')">
                                    <!-- Remove phone number -->
                                    <ng-container>
                                        <div
                                            class="flex items-center w-10 pl-2"
                                            [ngClass]="'mt-6'">
                                            <button
                                                class="w-8 h-8 min-h-8"
                                                mat-icon-button
                                                (click)="removeFileField(file.value.id ?? 0,i)"
                                                matTooltip="Remove">
                                                <mat-icon
                                                    class="icon-size-5"
                                                    [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                            </button>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container>
                        </div>
                        <!--end:telefones-->
                        <div
                            class="group inline-flex items-center mt-2 -ml-4 py-2 px-4 rounded cursor-pointer"
                            (click)="addFileField()">
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                            <span
                                class="ml-2 font-medium text-secondary group-hover:underline">Inserir novo contato</span>
                        </div>

                    </div>
                    <div class="flex justify-end mt-8">
                        <button
                            class="px-8 mr-2"
                            mat-flat-button
                            [color]="'accent'"
                            type="button"
                            matStepperPrevious>
                            Voltar
                        </button>
                        <button
                            class="px-8"
                            mat-flat-button
                            [color]="'primary'"
                            type="button"
                            matStepperNext>
                            Avançar
                        </button>
                    </div>
                </mat-step>

                <mat-step>
                    <ng-template matStepLabel>Done</ng-template>
                    <p class="my-6 font-medium">
                        Thank you for completing our form! You can reset the form if you would like to change your
                        information.
                    </p>
                    <div class="flex justify-end mt-8">
                        <button
                            class="px-8 mr-2"
                            mat-flat-button
                            [color]="'accent'"
                            type="button"
                            matStepperPrevious>
                            Voltar
                        </button>
                        <button
                            class="px-8"
                            mat-flat-button
                            [color]="'primary'"
                            type="reset"
                            (click)="submit(null);">
                            Salvar
                        </button>
                    </div>
                </mat-step>
            </mat-vertical-stepper>
        </form>
    </div>

</div>
